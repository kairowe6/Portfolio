/* =============================================================================
   BASE / TOKENS
   ========================================================================== */
:root{
  --bg:#0b0c0f; --surface:#111318; --border:#22262c;
  --text:#e8eaed; --muted:#a7b1c2; --accent:#9ae6b4;
  --gap:24px; --rad:12px;
}

*{box-sizing:border-box;}
html,body{height:100%;margin:0;}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif;
  background:var(--bg); color:var(--text); line-height:1.6;
}
a{color:var(--accent);}

/* =============================================================================
   AMBIENT BACKGROUND (CSS breathing; no JS)
   ========================================================================== */
@keyframes ambient-breathe{
  0%,100%{transform:translate(0,0) scale(1);}
  50%{transform:translate(var(--dx,6px),var(--dy,-6px)) scale(var(--scale,1.02));}
}
.ambient-blob{
  will-change:transform;
  animation:ambient-breathe var(--dur,18s) ease-in-out infinite;
  animation-delay:var(--delay,0s);
}
@media (prefers-reduced-motion:reduce){
  .ambient-blob{animation:none !important; transform:none !important;}
}

/* =============================================================================
   TOP BAR (MOBILE)
   ========================================================================== */
.topbar{
  display:none; position:sticky; top:0; z-index:50;
  background:var(--surface); border-bottom:1px solid var(--border);
  padding:10px 12px; align-items:center; gap:12px;
}
.topbar .brand{color:var(--text); text-decoration:none; font-weight:700;}
.menu-btn{
  background:transparent; color:var(--text);
  border:1px solid var(--border); padding:6px 10px;
  border-radius:8px; cursor:pointer;
}

/* =============================================================================
   LAYOUT: OUTER SHELL / COLUMNS
   ========================================================================== */
.shell{
  width:min(96vw,1800px);          /* wider, but capped on ultrawide */
  margin:0 auto; padding:var(--gap);
  display:grid;
  grid-template-columns:260px minmax(0,1fr) 300px;
  grid-template-areas:"sidebar content featured";
  gap:var(--gap);
}

/* =============================================================================
   SIDEBAR (LEFT) + NAV SCROLL + BIO PIN
   ========================================================================== */
.sidebar{
  grid-area:sidebar; position:sticky; top:24px; align-self:start;
  height:calc(100vh - 48px);
  background:var(--surface); border:1px solid var(--border);
  border-radius:var(--rad); padding:16px;
  display:flex; flex-direction:column; overflow:hidden; /* only nav scrolls */
}
.sidebar__brand{flex:0 0 auto;}
.sidebar__brand a{color:var(--text); font-weight:800; text-decoration:none;}
.sidebar__brand .role{display:block; color:var(--muted); font-size:.9rem; margin-top:4px;}

.sidebar__nav{
  margin-top:16px; display:flex; flex-direction:column; gap:8px;
  flex:1 1 auto; min-height:0; overflow:auto; padding-right:6px;
}
.sidebar__nav a{
  color:var(--text); text-decoration:none; padding:8px 10px;
  border-radius:8px; border:1px solid transparent;
}
.sidebar__nav a:hover{border-color:var(--border); background:#0f1116;}
.sidebar__nav::-webkit-scrollbar{width:6px;}
.sidebar__nav::-webkit-scrollbar-thumb{background:#2a2f38; border-radius:6px;}

/* Bio pinned at bottom, headshot wrap */
.sidebar__bio{
  border-top:1px solid var(--border); padding-top:14px;
  display:block; position:relative; flex:0 0 auto;
}
.sidebar__bio .avatar{
  float:left; width:98px; height:98px; border-radius:50%; object-fit:cover;
  margin:2px 12px 8px 0; shape-outside:circle(50%);
}
.sidebar__bio .bio{margin:0 0 8px 0; overflow-wrap:anywhere; word-break:normal;}
.sidebar__bio::after{content:""; display:block; clear:both;}
.email{color:var(--accent); text-decoration:none;}
.email:hover{text-decoration:underline;}

/* =============================================================================
   CONTENT (CENTER COLUMN) + STRUCTURE
   ========================================================================== */
.content {
  grid-area: content;
  display: grid;              /* lets child center itself */
}
.content__inner {
  max-width: 72ch;            /* default readable width */
  width: 100%;
  justify-self: center;
}

/* Code blocks and cards */
pre {
  background: #0f1116;
  padding: 1rem;
  border-radius: 8px;
  overflow-x: auto;
}
.content .card,
.featured .card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--rad);
  padding: 16px;
}



/* =============================================================================
   CONTENT TYPOGRAPHY (scoped to readable column)
   ========================================================================== */
.content__inner {
  line-height: 1.7;
}

/* Headings: sizes + spacing restored (preflight nukes margins by default) */
.content__inner h1 { font-size: 1.875rem; line-height: 1.25; margin-top: 2rem; margin-bottom: 0.8rem; }
.content__inner h2 { font-size: 1.5rem;   line-height: 1.3;  margin-top: 1.6rem; margin-bottom: 0.6rem; }
.content__inner h3 { font-size: 1.25rem;  line-height: 1.35; margin-top: 1.2rem; margin-bottom: 0.5rem; }

/* Paragraphs already have bottom margin; keep it */
.content__inner p { margin-bottom: 1.1rem; }

/* Lists: bring back bullets/nums and indentation */
.content__inner ul,
.content__inner ol {
  margin: 0 0 1.1rem 0;
  padding-left: 1.25rem;           /* indent */
}
.content__inner ul { list-style: disc outside; }
.content__inner ol { list-style: decimal outside; }
.content__inner li { margin: 0.25rem 0; }

/* Nested list markers */
.content__inner ul ul { list-style: circle outside; }
.content__inner ul ul ul { list-style: square outside; }

/* Code inline vs block */
.content__inner code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 0.95em;
  background: #0f1116;
  padding: 0.1em 0.35em;
  border-radius: 6px;
}
.content__inner pre code {
  background: transparent;   /* block code uses preâ€™s background */
  padding: 0;
}

/* Quotes */
.content__inner blockquote {
  margin: 1rem 0;
  padding-left: 1rem;
  border-left: 3px solid var(--border);
  color: var(--muted);
}



/* =============================================================================
   FEATURED RAIL (RIGHT)
   ========================================================================== */
.featured{
  grid-area:featured; position:sticky; top:24px; align-self:start;
  display:grid; gap:var(--gap);
}
.list{list-style:none; margin:0; padding:0;}
.list li{margin:6px 0;}
.list a{color:var(--accent); text-decoration:none;}
.list a:hover{text-decoration:underline;}

/* =============================================================================
   PAGE MODIFIERS (PER-PAGE OVERRIDES VIA content_class BLOCK)
   ========================================================================== */
.content--wide .content__inner{max-width:none;}      /* blog index uses full middle track */

/* =============================================================================
   BLOG PAGE (CARDS + CHAT)
   ========================================================================== */
.blog-shell{
  display:grid; grid-template-columns:1.2fr 0.8fr;  /* cards a bit wider than chat */
  gap:24px; align-items:start;
}
.blog-list{display:grid; gap:16px;}
.post-card{
  background:var(--surface); border:1px solid var(--border); border-radius:var(--rad);
  padding:14px 16px; cursor:pointer;
  transition:border-color 120ms ease, transform 120ms ease, box-shadow 120ms ease;
  box-shadow:0 0 0 rgba(0,0,0,0);
}
.post-card:hover{
  border-color:rgba(154,230,180,0.3);
  transform:translateY(-2px);
  box-shadow:0 6px 20px rgba(0,0,0,0.25);
}
.post-card__head{display:flex; justify-content:space-between; gap:12px;}
.post-card h2{margin:0; font-size:1.1rem;}
.post-card .meta{color:var(--muted); font-size:.9rem; white-space:nowrap;}
.post-card__tags{margin-top:6px; display:flex; flex-wrap:wrap; gap:6px;}
.tag{font-size:.75rem; padding:2px 8px; border:1px solid var(--border); border-radius:999px; color:var(--muted);}

/* summary reveal on hover */
.post-card__summary{
  overflow:clip; max-height:0; transition:max-height 200ms ease, opacity 200ms ease; opacity:.7;
}
.post-card:hover .post-card__summary{max-height:200px; margin-top:8px; opacity:1;}

/* Chat panel */
.blog-assistant{position:sticky; top:24px; align-self:start;}
.chat-card{background:var(--surface); border:1px solid var(--border); border-radius:var(--rad); padding:14px 16px;}
.chat-card h3{margin:0 0 8px 0;}
.chat-log{
  height:320px; overflow:auto; border:1px dashed var(--border);
  border-radius:10px; padding:10px; margin-bottom:10px;
}
.msg{margin:6px 0;}
.msg--bot{color:var(--muted);}
.msg--user{color:var(--text);}
.chat-input{display:grid; grid-template-columns:1fr auto; gap:8px;}
.chat-input input{
  background:transparent; border:1px solid var(--border); border-radius:10px; padding:8px 10px; color:var(--text);
}
.chat-input button{
  background:var(--accent); color:#062a1b; border:none; border-radius:10px; padding:8px 12px; font-weight:600; cursor:pointer;
}
.chat-input button:hover{filter:brightness(1.05);}

/* =============================================================================
   RESPONSIVE
   ========================================================================== */
/* Tablet: featured drops under content */
@media (max-width:1199px){
  .shell{
    grid-template-columns:240px 1fr;
    grid-template-areas:
      "sidebar content"
      "sidebar featured";
  }
  .featured{position:static;}
}

/* Mobile: sidebar becomes drawer; main stacks */
@media (max-width:899px){
  .topbar{display:flex;}
  .shell{
    grid-template-columns:1fr;
    grid-template-areas:"content" "featured";
    padding:16px;
  }
  .sidebar{
    position:fixed; inset:0 30% 0 0; height:100vh;
    border-right:1px solid var(--border); border-radius:0;
    transform:translateX(-110%); transition:transform 180ms ease; z-index:60;
  }
  .sidebar.open{transform:translateX(0);}
  .sidebar__bio .avatar{float:none; display:block; margin:0 auto 8px auto; shape-outside:none;}
}

/* Blog: stack chat under cards on narrower widths */
@media (max-width:1000px){
  .blog-shell{grid-template-columns:1fr;}
  .blog-assistant{position:static;}
}
