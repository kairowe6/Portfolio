/* =============================================================================
   TOKENS
   ========================================================================== */
:root{
  --bg:#0b0c0f; --surface:#111318; --border:#22262c;
  --text:#e8eaed; --muted:#a7b1c2; --accent:#9ae6b4;
  --gap:24px; --rad:12px;
}

*{box-sizing:border-box;}
html,body{height:100%;margin:0;}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif;
  background:var(--bg); color:var(--text); line-height:1.6;
}
a{color:var(--accent);}

/* =============================================================================
   TOP BAR (MOBILE)
   ========================================================================== */
.topbar{
  display:none; position:sticky; top:0; z-index:50;
  background:var(--surface); border-bottom:1px solid var(--border);
  padding:10px 12px; align-items:center; gap:12px;
}
.topbar .brand{color:var(--text); text-decoration:none; font-weight:700;}
.menu-btn{
  background:transparent; color:var(--text);
  border:1px solid var(--border); padding:6px 10px; border-radius:8px; cursor:pointer;
}

/* =============================================================================
   OUTER SHELL: 3 columns
   ========================================================================== */
.shell{
  width:min(96vw,1800px);
  margin:0 auto; padding:var(--gap);
  display:grid; gap:var(--gap);
  grid-template-columns:260px minmax(0,1fr) 300px;
  grid-template-areas:"sidebar content featured";
}

/* =============================================================================
   SIDEBAR
   ========================================================================== */
.sidebar{
  grid-area:sidebar; position:sticky; top:24px; align-self:start;
  height:calc(100vh - 48px);
  background:var(--surface); border:1px solid var(--border);
  border-radius:var(--rad); padding:16px;
  display:flex; flex-direction:column; overflow:hidden;
}
.sidebar__brand a{color:var(--text); font-weight:800; text-decoration:none;}
.sidebar__brand .role{display:block; color:var(--muted); font-size:.9rem; margin-top:4px;}
.sidebar__nav{
  margin-top:16px; display:flex; flex-direction:column; gap:8px;
  flex:1 1 auto; min-height:0; overflow:auto; padding-right:6px;
}
.sidebar__nav a{
  color:var(--text); text-decoration:none; padding:8px 10px;
  border-radius:8px; border:1px solid transparent;
}
.sidebar__nav a:hover{border-color:var(--border); background:#0f1116;}
.sidebar__nav::-webkit-scrollbar{width:6px;}
.sidebar__nav::-webkit-scrollbar-thumb{background:#2a2f38; border-radius:6px;}

/* Bio pinned at bottom */
.sidebar__bio{
  border-top:1px solid var(--border); padding-top:14px; flex:0 0 auto; position:relative;
}
.sidebar__bio .avatar{
  float:left; width:98px; height:98px; border-radius:50%; object-fit:cover;
  margin:2px 12px 8px 0; shape-outside:circle(50%);
}
.sidebar__bio .bio{margin:0 0 8px 0; overflow-wrap:anywhere;}
.sidebar__bio::after{content:""; display:block; clear:both;}
.email{color:var(--accent); text-decoration:none;}
.email:hover{text-decoration:underline;}

/* =============================================================================
   CONTENT (CENTER COLUMN)
   ========================================================================== */
.content{ 
  grid-area:content; 
  display:grid; 
}

/* Middle track: fill column, cap so it never hits the right rail */
.content__wide{
  width:100%;
  max-width:1100px;
  justify-self:center;
}

.link{ color:var(--accent); text-decoration:none; }
.link:hover{ text-decoration:underline; }

/* Narrow text blocks */
.prose{
  max-width:72ch;
  margin-left:auto;
  margin-right:auto;
  line-height:1.7;

  /* Viewport-anchored fade:
     - mask sized to 100vh so it matches the screen height
     - JS updates --proseMaskY so the fade hugs the viewport bottom
     - content fades to TRANSPARENT at the bottom of the screen */
  -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 78%, rgba(0,0,0,0) 100%);
          mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 78%, rgba(0,0,0,0) 100%);
  -webkit-mask-repeat: no-repeat;
          mask-repeat: no-repeat;
  -webkit-mask-size: 100% 100vh;
          mask-size: 100% 100vh;
  -webkit-mask-position: left var(--proseMaskY, 0px);
          mask-position: left var(--proseMaskY, 0px);
  will-change: mask-position;
}

/* Wide sections (iframes, demos) */
.full{ 
  width:100%; 
  margin-left:auto; 
  margin-right:auto; 
}

/* Code blocks and cards */
pre{ background:#0f1116; padding:1rem; border-radius:8px; overflow-x:auto; }
.content .card,.featured .card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--rad);
  padding:16px;
}

/* Typography inside prose */
.prose h1{
  font-size:3rem;
  line-height:1.1;
  text-align:center;
  margin:4rem 0 2rem;
}
.prose h2{
  font-size:2rem;
  line-height:1.25;
  margin:3rem 0 1.5rem;
}
.prose h3{
  font-size:1.5rem;
  line-height:1.35;
  margin:2rem 0 1rem;
}
.prose p{ margin-bottom:1.5rem; }

.prose ul,.prose ol{ margin:0 0 1.1rem 0; padding-left:1.25rem; }
.prose ul{ list-style:disc outside; }
.prose ol{ list-style:decimal outside; }
.prose li{ margin:.25rem 0; }
.prose ul ul{ list-style:circle outside; }
.prose ul ul ul{ list-style:square outside; }

.prose code{
  font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
  font-size:.95em;
  background:#0f1116;
  padding:.1em .35em;
  border-radius:6px;
}
.prose pre code{ background:transparent; padding:0; }

.prose blockquote{
  margin:1rem 0;
  padding-left:1rem;
  border-left:3px solid var(--border);
  color:var(--muted);
}

/* Push the hero down so the H1 isn't glued to the top */
.hero-spacer{ height:32vh; }

/* =========================
   Section divider: pure vertical space
   Grows with its distance from the viewport TOP (vh-based)
   ========================= */
.section-divider{
  /* Tunables (override per-divider if needed) */
  --divider-base: 2vh;    /* baseline gap at top (hero vibe) */
  --divider-max:  7vh;   /* extra gap when near bottom of viewport */
  --grow: 0vh;            /* per-element, set by JS each frame */

  height: calc(var(--divider-base) + var(--grow));
  transition: height 120ms ease-out;

  max-width: 72ch;
  margin: 0 auto;
  opacity: 1;             /* nothing drawn, just space */
}

/* Optional variants */
.section-divider.divider-hero{      /* after the welcome section */
  --divider-base: 12vh;
  --divider-max:  26vh;
}
.section-divider.divider-tail{      /* before your final section */
  --divider-max: 12vh;
}

/* No decorative lines/halos â€” pure space only */
.section-divider::before,
.section-divider::after { content:none; }


/* =============================================================================
   FEATURED RAIL (RIGHT)
   ========================================================================== */
.featured{
  grid-area:featured; position:sticky; top:24px; align-self:start;
  display:grid; gap:var(--gap);
}
.list{list-style:none; margin:0; padding:0;}
.list li{margin:6px 0;}
.list a{color:var(--accent); text-decoration:none;}
.list a:hover{text-decoration:underline;}

/* =============================================================================
   BLOG INDEX (cards + chat)
   ========================================================================== */
.blog-shell{ display:grid; grid-template-columns:1.2fr .8fr; gap:24px; align-items:start; }
.blog-list{ display:grid; gap:16px; }
.post-card{
  background:var(--surface); border:1px solid var(--border); border-radius:var(--rad);
  padding:14px 16px; cursor:pointer; transition:border-color 120ms, transform 120ms, box-shadow 120ms;
  box-shadow:0 0 0 rgba(0,0,0,0);
}
.post-card:hover{ border-color:rgba(154,230,180,.3); transform:translateY(-2px); box-shadow:0 6px 20px rgba(0,0,0,.25); }
.post-card__head{ display:flex; justify-content:space-between; gap:12px; }
.post-card h2{ margin:0; font-size:1.1rem; }
.post-card .meta{ color:var(--muted); font-size:.9rem; white-space:nowrap; }
.post-card__tags{ margin-top:6px; display:flex; flex-wrap:wrap; gap:6px; }
.tag{ font-size:.75rem; padding:2px 8px; border:1px solid var(--border); border-radius:999px; color:var(--muted); }
.post-card__summary{ overflow:clip; max-height:0; transition:max-height 200ms, opacity 200ms; opacity:.7; }
.post-card:hover .post-card__summary{ max-height:200px; margin-top:8px; opacity:1; }

.blog-assistant{ position:sticky; top:24px; align-self:start; }
.chat-card{ background:var(--surface); border:1px solid var(--border); border-radius:var(--rad); padding:14px 16px; }
.chat-card h3{ margin:0 0 8px; }
.chat-log{ height:320px; overflow:auto; border:1px dashed var(--border); border-radius:10px; padding:10px; margin-bottom:10px; }
.msg{ margin:6px 0; } .msg--bot{ color:var(--muted); } .msg--user{ color:var(--text); }
.chat-input{ display:grid; grid-template-columns:1fr auto; gap:8px; }
.chat-input input{ background:transparent; border:1px solid var(--border); border-radius:10px; padding:8px 10px; color:var(--text); }
.chat-input button{ background:var(--accent); color:#062a1b; border:none; border-radius:10px; padding:8px 12px; font-weight:600; cursor:pointer; }
.chat-input button:hover{ filter:brightness(1.05); }

/* =============================================================================
   DEMO LAB (preview + code-only tokens)
   ========================================================================== */
.demo-lab {
  display: grid;
  grid-template-columns: 1fr;   /* single column: iframe then code */
  gap: 16px;
  align-items: start;
}

.panel {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--rad);
  padding: 12px;
}

/* Preview */
.preview iframe {
  display: block;
  width: 100%;
  height: 540px;                 /* roomy default */
  border: 1px solid var(--border);
  border-radius: 12px;
  background: transparent;
}

/* Code-like editor with inline editable tokens */
.codeblock pre {
  background: #0f1116;
  border-radius: 10px;
  padding: 12px;
  overflow: auto;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 0.92rem;
  line-height: 1.5;
}
.token-edit {
  display: inline-block;
  padding: 0 4px;
  border-radius: 6px;
  background: rgba(154,230,180,0.12);
  border: 1px solid rgba(154,230,180,0.25);
  color: var(--text);
  min-width: 2ch;
  outline: none;
}
.token-edit:focus {
  background: rgba(154,230,180,0.18);
  border-color: rgba(154,230,180,0.5);
}
.codeblock .actions { display: flex; gap: 8px; margin-bottom: 8px; }

@media (max-width: 900px) {
  .preview iframe { height: 420px; }
}


/* =============================================================================
   RESPONSIVE
   ========================================================================== */
@media (max-width:1199px){
  .shell{
    grid-template-columns:240px 1fr;
    grid-template-areas:
      "sidebar content"
      "sidebar featured";
  }
  .featured{ position:static; }
}
@media (max-width:1000px){
  .blog-shell{ grid-template-columns:1fr; }
  .blog-assistant{ position:static; }
}
@media (max-width:899px){
  .topbar{ display:flex; }
  .shell{
    grid-template-columns:1fr;
    grid-template-areas:"content" "featured";
    padding:16px;
  }
  .sidebar{
    position:fixed; inset:0 30% 0 0; height:100vh;
    border-right:1px solid var(--border); border-radius:0;
    transform:translateX(-110%); transition:transform 180ms ease; z-index:60;
  }
  .sidebar.open{ transform:translateX(0); }
  .sidebar__bio .avatar{ float:none; display:block; margin:0 auto 8px; shape-outside:none; }
}
